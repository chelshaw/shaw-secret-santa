<script>
	import Error from '../../../components/error.svelte';

	export let data;

	let { session, supabase, info, questions } = data;
	$: ({ session, supabase, info } = data);
	$: answers = info
		? questions.filter((q) => !!info[q.key]).map((q) => ({ ...q, answer: info && info[q.key] }))
		: [];
</script>

<main>
	{#if !info}
		<h1>You don't have a match</h1>
		<Error>Please reach out to Chelsea if you think this is a mistake.</Error>
	{:else}
		<h1>Your match is...<br />{info.name}!</h1>
		<p class="large">
			Below are {info.name}'s responses. Good luck! üéÅ
		</p>
		<p class="small">
			Last updated {new Date(info.updated).toDateString()}
		</p>
		<div class="answers">
			{#each answers as answer}
				<p class="question">{answer.label}</p>
				<p class="answer"><strong>{answer.answer}</strong></p>
			{/each}
		</div>
	{/if}
</main>

<style>
	h1 {
		text-align: center;
	}
	.large {
		font-size: 1.2em;
	}
	.small {
		font-style: italic;
		font-size: 0.8;
	}
	.answers {
		margin: 36px 0;
		padding: 8px 16px;
		background: rgba(255, 255, 255, 0.2);
	}
	.question {
		color: rgba(255, 255, 255, 0.8);
	}
	.answer {
		font-size: 1.2em;
	}
	hr {
		border-color: rgba(255, 255, 255, 0.5);
	}
</style>
